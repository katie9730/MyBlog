**1. 单线程模型**
单线程模型指的是，JavaScript只在一个线程上运行，也就是说，JavaScript同时只能执行一个任务，其他任务都必须在后面排队等待。但是JavaScript引擎是多线程的，单个脚本只能在一个线程上运行（称为主线程），其他线程都是在后台配合的。

**2. 同步任务和异步任务**
程序里面的所有任务，可以分成两类：同步任务和异步任务。
- 同步任务：是指那些没有被引擎挂起、在主线程上排队执行的任务。只有前一个任务执行完毕，才能执行后一个任务。
- 异步任务：是指那些被引擎放在一边，不进入主线程、而进入任务列表的任务。只有引擎认为某个异步任务可以执行了（比如 Ajax 操作从服务器得到了结果），该任务（采用回调函数的形式）才会进入主线程执行。排在异步任务后面的代码，不用等待异步任务结束会马上运行，也就是说，异步任务不具有“堵塞”效应。

**3. 任务列队和事件循环**
- 任务列队：JavaScript 运行时，除了一个正在运行的主线程，引擎还提供一个任务队列，里面是各种需要当前程序处理的异步任务。当同步任务完成后，引擎就会去看任务列队里面的异步任务。有满足条件的，异步任务就会进入主线程开始执行，这是它就变成了同步任务了。（另外，异步任务的写法通常是回调函数）
- 事件循环：JavaScript 引擎怎么知道异步任务有没有结果，能不能进入主线程呢？答案就是引擎在不停地检查，一遍又一遍，只要同步任务执行完了，引擎就会去检查那些挂起来的异步任务，是不是可以进入主线程了。这种循环检查的机制，就叫做事件循环。

**4.异步操作模式**
- 4.1回调函数
    - 优点：简单、容易理解和实现
    - 缺点：不利于代码的阅读和维护且每个任务只能指定一个回调函数
```
function f1(callback){
    //...
    callback();
}

function f2(){
    //...
}

f1(f2);
// 此处f2是f1的回调函数。

```
- 事件监听
    - 优点：容易理解，可以绑定多个事件，每个事件可以指定多个回调函数，‘去耦合’，利于实现模块化。
    - 缺点：整个程序都要变成事件驱动型，运行流程不清晰。
```
f1.on('done',f2);
function f1(){
    setTimeout(function(){
        //...
        f1.trigger('done');
    },1000);
}
//此处表示，f1.trigger('done')表示，执行完成后，立即触发done事件，从而开始执行f2。
```
- 4.3 发布/订阅  
事件完全可以理解成“信号”，如果存在一个“信号中心”，某个任务执行完成，就向信号中心“发布”（publish）一个信号，其他任务可以向信号中心“订阅”（subscribe）这个信号，从而知道什么时候自己可以开始执行。这就叫做”发布/订阅模式”（publish-subscribe pattern），又称“观察者模式”（observer pattern）。

**5. 异步操作的流程控制**
- 5.1 串行执行：编写一个流程控制函数，让它来控制异步任务，一个任务完成以后，再执行另一个。
```
var items = [ 1, 2, 3, 4, 5, 6 ];
var results = [];

function async(arg, callback) {
  console.log('参数为 ' + arg +' , 1秒后返回结果');
  setTimeout(function () { callback(arg * 2); }, 1000);
}

function final(value) {
  console.log('完成: ', value);
}

function series(item) {
  if(item) {
    async( item, function(result) {
      results.push(result);
      return series(items.shift());
    });
  } else {
    return final(results[results.length - 1]);
  }
}

series(items.shift());
//函数series就是串行函数，它会依次执行异步任务，所有任务都完成后，才会执行final函数。items数组保存每一个异步任务的参数，results数组保存每一个异步任务的运行结果。
```
- 5.3 并行执行：即所有异步任务同时执行，等到全部完成以后，才执行final函数。
- 5.4 并行与串行的结合：每次最多只能并行执行n个异步任务，这样就避免了过分占用系统资源。

