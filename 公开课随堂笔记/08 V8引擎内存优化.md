### 1.主要知识点
- V8引擎如何回收垃圾
- 如何查看V8内存使用情况
- 内存优化实例   

**为什么我们要关注内存**
> 防止页面占用内存过大，引起客户端卡顿，甚至无响应。     
> Node使用的也是V8，内存对于后端服务的性能至关重要。因为服务持久性，后端更容易造成内存溢出。

### 2.V8引擎内存回收机制
#### 2.1 V8的内存分配
- 新生代内存空间
    + semi space(From)
    + semi space(To)
- 老生代内存空间

#### 2.2 内存大小
内存大小和操作系统有关64位为1.4G（新生代空间为64MB，老生代为1400MB），32位为0.7G（新生代空间为16MB，老生代为700MB） 

**为何对内存大小有一定的限制呢？**
- js最初设计是放在浏览器上的，然而浏览器上的js不持久。1.4G完全够用
- js回收垃圾的时候，会暂停所有代码的执行。js回收300MB的垃圾需要花费0.5s时间。
- 垃圾回收回收的是变量。

#### 2.3 垃圾回收算法
- 新生代简单的说就是复制：新生代带回标记为活的变量，通过牺牲空间，来获取时间。
- 老生代则是标记删除整理：老生代标记死掉的变量。

> 数组的特性：1）必须是连续的内存空间。2)js数组，并不是标准的计算及意义上的数组。3）数组查询效率最高。

### 3.V8是如何处理变量的
#### 利用node来查看内存的使用情况
通过process.memoryUsage()

#### 优化内存的技巧
- 尽量不要定义全局变量
- 全局变量记得销毁掉
- 用匿名自执行函数变全局为局部
- 尽量避免闭包 -- 错误的。因为这是IE5时代的说法

#### 内存泄露的原因
+ 滥用缓存
+ 大内存量的操作